#!/usr/bin/env bash

script=$(basename $0)

file=$1
shift


switches=""
while [[ $# -gt 0 ]]; do
    key=$1
    case ${key} in
        -h|--help)
            echo "${script} -- Search multiple patterns"
            echo "Usage: ${script} [-h] <file> <pattern...>"
            echo "-h, --help:"
            echo "        Print this message and quit."
            echo "patterns..."
            echo "        Multiple patterns, each quoted string is a pattern"
            exit 0;;
        *) switches+="-e '/$1/!d' ";;
    esac
    shift
done

bash -c "sed ${switches} ${file}"
