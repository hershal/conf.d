# -*- mode: sh -*-

source ~/conf.d/zsh/zprezto/init.zsh
source ~/conf.d/zsh/zpreztorc
source ~/conf.d/bashrc

zmodload zsh/complist
bindkey -M menuselect '^M' .accept-line
setopt CLOBBER
unsetopt share_history
bindkey -e

autoload copy-earlier-word
zle -N copy-earlier-word
bindkey '^[,' copy-earlier-word

setopt rmstarsilent
alias rsync='noglob rsync'
precmd () { echo -ne "\ek$(basename "$(readlink -e .)")\e\\" }
preexec () { echo -ne "\ek${1}\e\\" }

# fixes for tramp
if [[ "$TERM" == "dumb" ]]
then
    unsetopt zle
    unsetopt prompt_cr
    unsetopt prompt_subst
    unfunction precmd
    unfunction preexec
    PS1='$ '
fi
